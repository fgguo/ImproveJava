### Java的基本程序设计结构
#### 数据类型
##### 整型
- Java提供了4种整型:byte,short,int,long.
- Java中，整型的范围与运行Java代码的机器无关，而在C++中，int 和long等类型的大小与目标平台相关.
- 长整型有一个L或l后缀，十六进制有一个0X或0x前缀，八进制有一个0前缀，Java 7起，加上前缀0b或0B就可以写二进制数.
- Java没有任何无符号形式的int/long/short/byte.
##### 浮点类型
- float精度是6-7位有效数字，double精度是float的二倍
- float类型的数只有一个后缀F或f，没有后缀的浮点数默认为double
##### char类型
- 有些Unicode字符可用一个char值描述，另外一些需要两个
- char类型的字面量值要用单引号括起来
##### boolean类型
- Java中整型值和布尔值不能互相转换，在C++中，值0相当于false,非0值相当于true.
#### 变量与常量
- 变量名必须是一个以字母开头并由字母和数字组成的序列，不能使用保留字作为变量名
- 声明一个变量后，必须用赋值语句对变量进行显示初始化，变量的声明尽可能地靠近第一次使用的地方.
- Java 10 开始，对于局部变量，如果可以从变量的初始值推断出它的类型，就不需要声明类型。只需要使用关键字var而无需指定类型，如var greeting = "hello";则greeting是一个字符串
- 关键字final表示常量，一旦赋值就不能再更改了，通常，常量名使用全大写.
- 类常量的定义位于main方法的外部
#### 枚举类型
- 变量的取值只在一个有限的集合内时，可以定义枚举类型。如， enum Size {Small, Medium, Large};然后声明这种类型的变量:Size s = Size.Small.
#### 运算
- Math类中包含了各种数学函数，在文件顶部加入import static java.lang.Math.*;就可以直接使用方法，不必加前缀了
- 一个二元运算符连接两个值时，要先将两个操作数转为同一个数据类型，如果一个是double，另一个转换为double；否则如果一个是float，另一个会转为float;否则其中一个是long,另一个转为long；否则两个操作数都转为int
- 将double转为int这种会损失信息的转换需要通过强制类型转换完成，即在圆括号中给出想要转换的目标类型，比如
  double x = 9.999; int nx = (int)x;   
- 如果想要对浮点数进行舍入运算，需要使用Math.round方法。如，int nx = (int)Math.round(x);使用强制转换的原因是round返回的类型为long.
#### 字符串
- Java字符串就是Unicode字符序列，用双引号括起来.
- substring(0,3)表示提取0-3的子串，不包括位置3.
- Java字符串与一个非字符串的值拼接时，后者会转换为字符串
- 如果把多个字符串拼接在一起，并指定一个分隔符，可以使用join方法。如String all = String.join("/","S","M","L");
- 不能修改Java字符串中的单个字符
- 使用equals方法检测两个字符串是否相等，而不是使用==.
- 使用if(str.length()==0)或if(str.equals(""))判断空串
- 使用if(str == null)判断是否为null
- String的相关API在书50页
- 如果需要使用小段字符串来构建一个字符串，使用StringBuilder.
#### 输入与输出
- 读取控制台输入需要构造一个与"标准输入流"System.in关联的Scanner对象.Scanner in= new Scanner(System.in);
- nextLine方法将读取一行输入，nextInt读取一个整数，nextDouble读取下一个浮点数,next读取输入的下一个单词(以空格为分隔符),hasNext检测是否输入中还有其他单词.
- System.out.printf可以格式化输出，假如x = 3333.3333333，System.out.printf(%8.2f, x);表示以8个字符的宽度打印x，精度为小数点后2位。也就是说会打印一个前导空格和7个字符(3333.33).
- 每个以%字符开始的格式说明符都用相应的参数替换，常见的格式转换符有，d表示十进制数，x表示十六进制数，o表示八进制数，f表示定点浮点数，e表示指数浮点数，s表示字符串,c表示字符.
#### 控制流程
- 块(即复合语句)是指由若干条Java语句组成的代码块，并用一对大括号括起来.
- 条件语句if 
- 循环语句for,while
- 多重选择switch，switch(choice){case 1: ...break;default: ... break;};switch语句将从与选项值匹配的case标签开始，直到遇到break语句或到switch语句的结束处为止。如果没有匹配的case标签而有default字句，就执行这个语句.
- case标签可以是char/short/byte/int，枚举常量，Java 7开始还可以是字符串.
#### 大数
- 如果基本的整数和浮点数精度不能够满足需求，那么可以使用java.math中的BigInteger和BigDecimal。使用静态的valueOf方法可以将普通的数转为大叔，如BigInteger a = BigInteger.valueOf(100)；
- 不能使用算术运算符如+-*/处理大数，需要使用类中的方法，如add,multiply,divide等
#### 数组
- 声明，初始化，访问，for each循环遍历
- 如果希望将一个数组的所有值拷贝到一个新的数组，使用Arrays类的copyOf方法，第一个参数是源数组，第二个参数是新数组长度.
### 对象与类
##### 类之间的常见关系
- 依赖：use-a,一个类使用或者操作另一个类，就说一个类依赖于另一个类，应该尽可能将相互依赖的类减少，也就是降低类之间的耦合。
- 聚合：即has-a,一个类包含另一个类
- 继承：is-a,一个更特殊的类与一个更一般的类之间的关系。
##### 对象与对象变量
- 类的实例称为对象，要使用对象，必须要先构造对象并初始化，才能使用对象的方法.
- Date deadline = new Date();有两个部分： new Date构造了一个Date类型的对象，他的值是新创建对象的一个引用，这个引用存储在变量deadline中.
- 所有的Java对象都存储在堆中，当一个对象包含另一个对象变量时，只是包含着另一个堆对象的指针.

##### 构造器
- 构造器与类同名
- 每个类可以有一个以上的构造器
- 构造器可以有0个、1个或多个参数
- 构造器没有返回值
- 构造器总是伴着new 操作符一起使用
- 不要在构造器中定义与实例字段同名的局部变量,这些局部变量会屏蔽同名的实例字段.
##### 封装
如果想要获得或设置实例字段的值，那么只需要提供下面三项内容：

- 一个私有的数据字段
- 一个公共的访问字段的方法
- 一个公共的更改字段的方法
##### 基于类的访问权限
- 方法可以访问调用这个方法的对象的私有数据
- 一个方法可以访问所属类的所有对象的私有数据
- 在设计一个类时，由于公共数据非常危险，所以应该讲所有的数据字段都设置为私有的.
- 通常，为了实现某个公共接口的一些辅助方法，最好设计为私有
##### 静态字段与静态方法
- static修饰的字段，它属于类，不属于任何单个的对象；而非静态的实例字段，每个对象都有自己的一个副本.
- 静态变量使用的比较少，但在类中定义一个静态常量却很常用
- 静态方法不能访问实力字段，可以使用类名或者对象调用静态方法，但是建议使用类名来调用静态方法
- 可以使用静态工厂方法代替构造器来构造对象
##### 方法参数
- Java采用按值调用，也就是方法得到的是参数值的一个副本
- Java有两种类型的方法参数，基本数据类型(数字、布尔值)和对象引用，方法可以改变对象参数的内部状态但不能让一个对象参数引用一个新的对象
##### 对象构造
- 多个方法有相同的名字、不同的参数，就出现了重载
- Java允许重载任何方法，而不只是构造器方法。要完整描述一个方法，需要指定方法名以及参数，这叫方法的签名。
- 如果在构造器中没有显式为字段设置初值，就会被自动赋为默认值，数值为0，布尔为false,对象应用为null.方法中的变量必须明确初始化
- 如果写一个类时没有写构造器，那么JVM会提供一个无参构造器，这个构造器将所有的字段设置为默认值
- 如果类中提供了至少一个构造器但是没有提供无参构造器，那么构造对象时如果提供参数就是不合法的
- 可以直接在类定义中直接为任何字段赋值，在执行构造器之前会完成这个赋值操作。如果一个类的所有构造器都希望把某个字段设置为一个值，这个语法就很有用
- 如果构造器的第一语句形如this(...)，这个构造器将调用同一个类的另一个构造器
- 静态字段的初始化在类的第一次加载时执行，默认值是0、false或null.所有的静态字段和静态代码都按照类中声明的顺序执行
- 看书中132页的程序4-5，展示了本节的特性
#### 包
- Java允许使用包将类组织在一个集合中，使用包的主要原因是确保类名唯一性，同名类放在不同包中就不会产生冲突。
- 有一种import语句允许导入静态方法金额静态字段而不只是类，如import java.lang.System.*
- 没有指定public或private的类可以被同一个包中的所有方法访问
- 140页类路径
##### 类设计技巧
- 一定保证数据私有
- 一定要对数据进行初始化。可以提供默认值，也可以在所有的构造器中设置默认值
- 不用在类中使用过多的基本类型。用其他的类替换使用多个相关的基本类型，例如用一个Address类替换一个Customer类的地址相关的实例字段。
- 不是所有的字段都需要单独的字段访问器和字段更改器。如一些不需要或者不希望获得或设置的实例字段
- 分解有过多职责的类。看153页的例子
- 类名和方法名要能体现他们的指责。类名应当是一个名词(Order)或前面有形容词修饰的名词(RushOrder)或是有动名词修饰的名词(BillingAddress)。对于方法，遵循标准惯例。
- 优先使用不可变的类。如果类是不可变的，就可以安全地在多个线程间共享其对象。

